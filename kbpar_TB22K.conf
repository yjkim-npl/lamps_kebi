#G4MacroFile s geant4_run.mac
G4VisFile s geant4_vis.mac

# Beam
# -----------------------------------------------

G4InputMode           i 0          # 0: single, 1: text file
G4InputParticle       s proton		# mode 0
#G4InputIonId         i 1000060120  # mode 0, for ion 
G4InputNumberPerEvent i 100		    # mode 0
G4InputCharge         d 1           # mode 0, input charge state 
G4InputEnergy         d 100.		# mode 0, MeV
G4InputEnergyError    d 0.001       # mode 0, Uncertainty in exact number (1 % = 0.01)
G4InputWidthX         d 0.2 #100	        # mode 0, beam profile (square, default, mm)
G4InputWidthY         d 0.05 #100	        # mode 0, beam profile (square, default, mm)
#G4InputCircular      b 0			# mode 0, beam profile (circular)
#G4InputRadius        d 5.          # mode 0, beam profile (circular, mm)
G4InputPosZ           d -1700.      # mode 0, beam insertion position (default: -worlddz)
G4InputTimeDist		  b 0			# yjkim, pulse width option

# I/O
# -----------------------------------------------

G4InputFile  s input.dat
G4OutputFile s g4_TB22Kmc.root

MCTrack                  b 1
MCPostTrack              b 1
MCSetEdepSumTree         b 1
MCStepPersistency        b 1
MCSecondaryPersistency   b 1
MCTrackVertexPersistency b 0

# Detector configuration
# -----------------------------------------------

DetFrameOn b 1 # Turn on all detectors' frame

AcrylShieldIn b 1
CollimatorIn  b 1
ShieldIn	  b 1
SCIn     	  b 1
SC1fIn		  b 0	# SC1 frame
BDCIn   	  b 1
BDCfIn		  b 0	# BDC frame
TargetIn	  b 1
TargetfIn	  b 0
SCTiltIn	  b 1
SCTiltfIn	  b 0
ATTPCIn 	  b 0
ATTPCfIn	  b 0
BTOFIn  	  b 0
FTOFIn  	  b 1
Si-CsIIn	  b 0
Si-CsIfIn	  b 1
NDIn    	  b 0

# Dimensions/Options  (units: mm)
# -----------------------------------------------

# World
worldOpt i    1 # 0 for vacuum, 1 for air
worldShape i  0 # 0 for square, 1 for sphere
worldID  i   -1
worlddX  d  700 #  500 # Half width
worlddY  d 1000 #  500 # Half height
worlddZ  d 1800 # 1000 # Half length
worlddR	 d 1500 # 1500 # radius : diameter/2

# Shield (acryl)
ArcShieldID 	i -2
ArcShieldDimX	d 800
ArcShieldDimY	d 520
ArcShieldDimZ	d 100
ArcShieldHoleR	d 50/2		# half diameter
ArcShieldHoleX	d 110		# full width
ArcShieldHoleY	d 110		# full width
ArcShieldOffZ1	d -1500
ArcShieldOffZ2	d -1000

# Collimator (acryl)
CollID		i	-3
CollDimX 	d	250
CollDimY 	d	250
CollDimZ 	d	100
CollslitX 	d	0.4 # Horisontal slit, front
CollslitY 	d	0.1 # Vertial slit, rear
CollPosZ 	d	-1350

# Shield (boron)
ShieldID 	i	-4
ShieldDimX 	d	300
ShieldDimY 	d	300
ShieldDimZ 	d	110
ShieldHoleX d	1
ShieldHoleY d	1
ShieldPosZ 	d	-1150

# SC 1 per 100 ns proton input : 200~300/s
scID    i  1100
scDimX  d   110. # Full width
scDimY  d   110. # Full height
scDimZ  d     3. # Full thickness
scPosZ0 d  -750. # Position of upstream edge, beamline
scPosZ1 d  -100. # Position of upstream edge, beamline
SC1f1x	d 	500
SC1f1y	d 	50
SC1f1z	d 	110
SC1f2x	d 	195
SC1f2y	d	150
SC1f2z	d 	110

# BDC
bdcID    i 1200
bdcDimX  d  160. # Full width (p10)
bdcDimY  d  160. # Full height (p10)
bdcDimZ  d   20. # Full thickness (p10)
bdcPosZ0 d -600. # Position of upstream edge
bdcPosZ1 d -300. # Position of upstream edge, WARNING! 'BDC1 <-> BDC2' = 500 mm
bdc1fx	 d  426
bdc1fy	 d	406
bdc1fz	 d	 95
bdc2fx	 d  386
bdc2fy	 d	386
bdc2fz	 d	 86

# Target
targetID   i 1300
targetMat  i    3  # 0 (C2H4), 1 (liquid H), 2 (solid H from HIMAC paper), and 3 (graphite)
targetDimX d   50. # Full width
targetDimY d   50. # Full height
targetDimZ d    5. # Full thickness
targetPosZ d    0. # Position of upstream edge

# +++++++++++++++++++++++++++++++++++++

# Common theta angle WRT beamline in deg
comSetup  i   1  # 0 (AT-TPC + SC arrays) and 1 (Two AT-TPCs)
comTheta0 d +15. # +35 or +10, 1st angle in deg
comTheta1 d +30. # -35 or -50, 2nd angle in deg

# SC with tilted angle (in front of AT-TPC)
sctID    i 1400
sctDimX  d  110.  # Full width 
sctDimY  d  110.  # Full height
sctDimZ  d    0.2 # Full thickness
sctPosZ0 d  750.  # Position of upstream edge, in front of AT-TPC
sctPosZ1 d  750.
scttfx	 d	500
scttfx	 d	250
scttfx	 d	220

# ATTPC - at least r>200 mm required to avoid soft electrons
attpcID    i 1500
attpcFC	   b 	0
attpcFCX   d  100
attpcFCY   d  100
attpcFCZ   d  150
attpcDimX  d  250. # Full width
attpcDimY  d  250. # Full height
attpcDimZ  d  200. # Full thickness
attpcPosZ0 d  500. # Position of upstream edge, from target: >360 for 35 deg, >1450 for 10 deg
attpcPosZ1 d  500.
attpcfx	   d  300.
attpcfy	   d  300.
attpcfz	   d  216.

# TOF module (common for both B/FTOF, the dimension is for BTOF)
tofSlatL_b d 1200. # Full length, central box
tofSlatL_f d  150. # Full length, fish tail 
tofSlatW   d   90. # Full width
tofSlatT   d   10. # Full thickness

# +++++++++++++++++++++++++++++++++++++

# FTOF (in front of ND)
ftofID    i 1600
ftofSlatN i    1  # number of slat pairs
ftofPosY  d   40. # Distance of top/bottom edge from z axis (beam)
ftofPosZ  d 1100. # Position of upstream edge

# ND
ndID    i 1700
ndSlatN i    2  # number of slat pairs
ndSlatL d 2000. # Full length, a slat
ndSlatW d  100. # Full width, a slat
ndSlatT d  100. # Full thickness, a slat
ndPosY  d   50. # Distance of top/bottom edge from z axis (beam)
ndPosZ  d 2900. # Position of upstream edge

# Si-CsI
SiID 	i	1800
CsIID	i	1801
Si-CsIdX d	80
Si-CsIdY d 	42
SidZ	 d	2.4
CsIdZ	 d	25
posRSi	 d	900
Fx		 d	250
Fy		 d	250
Fz		 d	150
